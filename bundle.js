(()=>{"use strict";(()=>{var t;!function(t){t.DEL="del",t.DELALL="delAll",t.DIVIDE="divide",t.MULTIPLY="multiply",t.MINUS="minus",t.PLUS="plus",t.EQUALLY="equally",t.SQRT="SQRT",t.POW="POW"}(t||(t={}));const n=t=>{if(NaN!==+t)return+t;throw new Error("This argument is not a number")},e=t=>(0^n(t))===n(t),i=t=>{const e=t.slice(t.indexOf("."),t.length-1).length;return{number:n(t),lengthAfterDot:e}},o=[{content:"CE",operation:t.DEL},{content:"C",operation:t.DELALL},{content:"/",operation:t.DIVIDE},{content:"*",operation:t.MULTIPLY},{content:"1",operation:null},{content:"2",operation:null},{content:"3",operation:null},{content:"-",operation:t.MINUS},{content:"4",operation:null},{content:"5",operation:null},{content:"6",operation:null},{content:"+",operation:t.PLUS},{content:"7",operation:null},{content:"8",operation:null},{content:"9",operation:null},{content:"^",operation:t.POW},{content:"0",operation:null},{content:".",operation:null},{content:"=",operation:t.EQUALLY},{content:"&#8730",operation:t.SQRT}];class a{constructor(n,e,i){this.$container=n,this.$input=e,this.$tempoInput=i,this.buttons=o,this.operationObjectFunction={[t.DELALL]:()=>this.clearAll="",[t.DEL]:()=>this.clear="",[t.MINUS]:this.calculate.bind(this,t.MINUS),[t.PLUS]:this.calculate.bind(this,t.PLUS),[t.EQUALLY]:this.calculate.bind(this,t.EQUALLY),[t.DIVIDE]:this.calculate.bind(this,t.DIVIDE),[t.MULTIPLY]:this.calculate.bind(this,t.MULTIPLY),[t.SQRT]:this.calculate.bind(this,t.SQRT),[t.POW]:this.calculate.bind(this,t.POW)},this.accum="",this.temporary="",this.operation=null,this.$operation=null,this.$container.addEventListener("click",this.handleChange.bind(this))}init(){const t=document.createElement("div"),n=document.querySelector(".input");t.className="operation",n?.append(t),this.$operation=t,this.$container.innerHTML=this.buttons.map(((t,n)=>`<div class = '${t.operation?"button button-operation":"button button-num"}' data-id = '${n}' ${t.operation?`data-operation = "${t.operation}"`:null}>${t.content}</div>`)).join("")}handleChange(e){const i=e.target;"container"!==i.className&&(i.dataset.operation&&(i.dataset.operation!==t.MINUS||this.accum||this.accum.includes(t.MINUS))?(isFinite(n(this.accum))||"-"===this.accum&&i.dataset.operation===t.DELALL||i.dataset.operation===t.DEL)&&this.operationObjectFunction[i.dataset.operation]():("."!==i.textContent||this.accum?this.accum+="."===i.textContent&&this.accum.includes(".")?"":i.textContent:this.accum+=0+i.textContent,this.$input.innerHTML=this.accum.split("").map((t=>`<span class = "input-text">${t}</span>`)).join("")))}calculate(n){if(n!==t.EQUALLY&&!this.operation){if(this.temporary=this.accum,this.operation=n,this.operation===t.SQRT)return void(this.calculateValue=this.operation);this.$operation.innerHTML=this.temporary?(n=>{switch(this.operation){case t.MINUS:return"-";case t.PLUS:return"+";case t.MULTIPLY:return"*";case t.DIVIDE:return"/";case t.POW:return"^";case t.SQRT:return"&#8730"}})():"",this.$tempoInput.textContent=this.temporary,this.clear=""}this.operation&&this.temporary&&this.accum&&(this.calculateValue=this.operation)}transformValueForCalculate(t,o){if(!e(t)||!e(o)){const n=i(o),e=i(t),a=10**Math.max(e.lengthAfterDot,n.lengthAfterDot);return{temporary:n.number*a,accum:e.number*a,divider:a}}return{temporary:n(o),accum:n(t)}}set calculateValue(e){const{temporary:i,divider:o,accum:a}=this.transformValueForCalculate(this.accum,this.temporary),r={[t.MINUS]:o?(i-a)/o:i-a,[t.PLUS]:o?(i+a)/o:i+a,[t.DIVIDE]:i/a,[t.MULTIPLY]:o?i*a/o**2:i*a,[t.SQRT]:Math.sqrt(n(this.accum)),[t.POW]:n(this.temporary)**n(this.accum)}[e];this.clearAll="",this.sum=r,this.accum=this.sum+"",this.$input.textContent=this.accum}set clearAll(t){this.accum=t,this.operation=null,this.temporary=t,this.$input.textContent=this.accum,this.$tempoInput.textContent=this.temporary,this.$operation.textContent=t}set clear(t){this.accum=t,this.$input.textContent=this.accum}}document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".container"),n=document.querySelector(".enter-input"),e=document.querySelector(".temporary-input"),i=document.querySelector(".background");function r(){const t=i.clientWidth,n=i.clientHeight,e=o.map((t=>t.content));i.style.gridTemplateRows="195,8px ".repeat(Math.round(n/200)),i.style.gridTemplateColumns="205.8px ".repeat(Math.round(t/200)),i.innerHTML=new Array(Math.round(n/200)*Math.round(t/200)).fill("").map((()=>{return`<div class = "background-rect">${e[(0,t=e.length-1,0+Math.floor(Math.random()*(t+1-0)))]}</div>`;var t})).join("")}const c=new a(t,n,e);r(),c.init(),setInterval(r,2e3)}))})()})();